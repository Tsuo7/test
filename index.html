<!DOCTYPE html>
<html lang="pt-br" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="meta-title">TSUO INDUSTRIES | TITAN EDITION V18.4</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;600;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --p-accent: #bc13fe;
            --p-glow: rgba(188, 19, 254, 0.6);
            --p-bg: #020204;
            --p-surface: #0a0a0e;
        }

        /* Temas de Alta Voltagem */
        .theme-blood { --p-accent: #ff003c; --p-glow: rgba(255, 0, 60, 0.6); }
        .theme-emerald { --p-accent: #00ff88; --p-glow: rgba(0, 255, 136, 0.6); }
        .theme-cyber { --p-accent: #00e5ff; --p-glow: rgba(0, 229, 255, 0.6); }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--p-bg);
            color: #ffffff;
            font-family: 'Outfit', sans-serif;
            overflow-x: hidden;
            height: 100%;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        /* Background 3D Canvas */
        #canvas-3d {
            position: fixed; top: 0; left: 0; z-index: -2;
            width: 100%; height: 100%; pointer-events: none;
        }

        /* Overlay de Scanlines Dinâmico */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            z-index: 100; background-size: 100% 3px, 3px 100%;
            pointer-events: none; opacity: 0.4;
        }

        /* Glassmorphism Ultra */
        .glass {
            background: rgba(10, 10, 15, 0.7);
            backdrop-filter: blur(30px) saturate(150%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        }

        /* Botão Massive 3D */
        .btn-elite {
            position: relative; overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid var(--p-accent);
        }
        .btn-elite:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 0 40px var(--p-glow);
            background: var(--p-accent);
            color: white;
        }

        /* Cards de Asset */
        .asset-card {
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .asset-card:hover {
            transform: rotateY(10deg) rotateX(5deg) translateY(-10px);
        }

        /* Animação de Glitch */
        .glitch-text { animation: glitch 3s infinite; }
        @keyframes glitch {
            0% { text-shadow: 2px 0 red, -2px 0 blue; }
            5% { text-shadow: -2px 0 red, 2px 0 blue; }
            10% { text-shadow: 2px 0 red, -2px 0 blue; }
            11% { text-shadow: none; }
        }

        /* IA Terminal Scroll */
        #aiHistory::-webkit-scrollbar { width: 4px; }
        #aiHistory::-webkit-scrollbar-thumb { background: var(--p-accent); border-radius: 10px; }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>

<canvas id="canvas-3d"></canvas>
<div class="overlay"></div>

<div id="entry-popup" class="fixed inset-0 z-[2000] hidden items-center justify-center bg-black/90 backdrop-blur-3xl">
    <div id="popup-card" class="glass max-w-2xl w-full p-16 rounded-[40px] text-center border-[var(--p-accent)]/50 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[var(--p-accent)] to-transparent animate-pulse"></div>
        
        <div class="mb-8 inline-block p-6 bg-[var(--p-accent)]/10 rounded-full">
            <i data-lucide="shield-check" class="w-16 h-16 text-[var(--p-accent)]"></i>
        </div>
        
        <h2 class="text-6xl font-black uppercase italic tracking-tighter mb-4 glitch-text">
            GRUPO <span class="text-[var(--p-accent)]">SORTEIOS</span>
        </h2>
        <p class="mono text-xs text-gray-400 mb-12 tracking-[0.5em] uppercase">> ACESSO À DATABASE DE ELITE LIBERADO</p>
        
        <a id="popup-link" href="#" target="_blank" onmouseenter="playSound('hover')" onclick="playSound('click')" class="block w-full py-8 bg-[var(--p-accent)] text-white font-black rounded-2xl text-3xl shadow-[0_0_50px_var(--p-glow)] hover:scale-105 transition-all uppercase italic">
            Entrar no Grupo
        </a>
        
        <button onclick="closePopup()" class="mt-8 text-[10px] mono text-gray-700 hover:text-white transition tracking-widest">[ FECHAR_PROTOCOLO_X ]</button>
    </div>
</div>

<nav class="fixed top-0 w-full z-[1000] glass border-b border-white/5 px-10 py-6">
    <div class="max-w-screen-2xl mx-auto flex justify-between items-center">
        <div class="flex items-center gap-6">
            <div id="site-logo" class="w-14 h-14 bg-[var(--p-accent)] flex items-center justify-center font-black text-2xl rounded-xl shadow-[0_0_30px_var(--p-glow)]">T</div>
            <div>
                <h1 id="site-name" class="text-2xl font-black uppercase italic tracking-tighter">TSUO <span class="text-[var(--p-accent)]">INDUSTRIES</span></h1>
                <div class="flex gap-4 mono text-[8px] text-gray-500 uppercase tracking-widest mt-1">
                    <span>Status: <span class="text-green-500">Online</span></span>
                    <span>Version: 18.4.2</span>
                    <span id="real-time">00:00:00</span>
                </div>
            </div>
        </div>

        <div class="hidden xl:flex items-center gap-12">
            <div class="flex flex-col items-end mono text-[10px]">
                <span id="user-ip" class="text-[var(--p-accent)] font-bold">IP: 0.0.0.0</span>
                <span id="user-loc" class="text-gray-500 italic">LOCALIZING...</span>
            </div>
            <button onclick="openModal('loginModal')" class="btn-elite px-8 py-3 rounded-lg mono text-[10px] uppercase font-bold tracking-widest">Acessar Terminal</button>
        </div>
    </div>
</nav>

<main class="relative pt-60 pb-20 px-10 max-w-screen-2xl mx-auto">
    <div class="grid lg:grid-cols-2 gap-24 items-center">
        <div class="z-10">
            <div class="inline-flex items-center gap-4 px-4 py-2 glass rounded-full mb-8 border-[var(--p-accent)]/20">
                <span class="w-2 h-2 bg-[var(--p-accent)] rounded-full animate-ping"></span>
                <span class="mono text-[10px] uppercase text-[var(--p-accent)] font-bold tracking-widest">Cybernet Connection Established</span>
            </div>
            <h2 class="text-[100px] md:text-[150px] font-black uppercase italic leading-[0.75] tracking-tighter mb-12">
                TECH <br> <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-white/5">ABYSS</span>
            </h2>
            
            <div class="flex flex-wrap gap-6">
                <button onclick="renderFeed('todos')" class="btn-elite px-10 py-5 bg-white text-black font-black text-xs uppercase italic rounded-sm">Todos_Arquivos</button>
                <button onclick="renderFeed('script')" class="btn-elite px-10 py-5 glass mono text-xs uppercase rounded-sm">Scripts_Luau</button>
                <button onclick="renderFeed('executor')" class="btn-elite px-10 py-5 glass mono text-xs uppercase rounded-sm">Executores_V7</button>
            </div>
        </div>

        <div class="hidden lg:block">
            <div class="glass p-10 rounded-[30px] border-l-8 border-[var(--p-accent)] relative overflow-hidden">
                <div class="flex justify-between items-center mb-8">
                    <h4 class="mono text-xs font-black uppercase text-gray-400 tracking-widest">System_Live_Telemetry</h4>
                    <div class="flex gap-2">
                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                        <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    </div>
                </div>
                <div id="system-logs" class="h-60 overflow-hidden mono text-[10px] text-[var(--p-accent)]/70 space-y-2">
                    </div>
            </div>
        </div>
    </div>

    <div id="postFeed" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-10 mt-40 pb-40">
        </div>
</main>

<div id="adminPanel" class="fixed inset-0 z-[3000] hidden bg-[#010102] overflow-hidden">
    <div class="flex h-full">
        <aside class="w-72 border-r border-white/5 bg-[#050507] p-8 flex flex-col">
            <div class="mb-12">
                <h3 class="text-xl font-black italic uppercase">Tsuo <span class="text-[var(--p-accent)]">Core</span></h3>
                <p class="text-[8px] mono text-gray-600 uppercase">Master Admin Interface</p>
            </div>
            
            <nav class="flex-grow space-y-2">
                <button onclick="switchTab('tab-dash')" class="w-full text-left p-4 rounded-xl mono text-xs uppercase hover:bg-white/5 transition flex items-center gap-4"><i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard</button>
                <button onclick="switchTab('tab-assets')" class="w-full text-left p-4 rounded-xl mono text-xs uppercase hover:bg-white/5 transition flex items-center gap-4"><i data-lucide="database" class="w-4 h-4"></i> Gerenciar Assets</button>
                <button onclick="switchTab('tab-config')" class="w-full text-left p-4 rounded-xl mono text-xs uppercase hover:bg-white/5 transition flex items-center gap-4"><i data-lucide="settings" class="w-4 h-4"></i> Config Site</button>
                <button onclick="switchTab('tab-security')" class="w-full text-left p-4 rounded-xl mono text-xs uppercase hover:bg-white/5 transition flex items-center gap-4"><i data-lucide="shield-alert" class="w-4 h-4"></i> Segurança</button>
            </nav>

            <button onclick="location.reload()" class="p-4 bg-red-600/10 text-red-500 rounded-xl mono text-[10px] font-bold uppercase italic">Finalizar Sessão</button>
        </aside>

        <main class="flex-grow p-16 overflow-y-auto bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">
            
            <div id="tab-dash" class="tab-content active space-y-12">
                <div class="grid grid-cols-4 gap-8">
                    <div class="glass p-8 rounded-2xl border-b-4 border-blue-500">
                        <p class="mono text-[10px] text-gray-500 uppercase">Total_Visits</p>
                        <h4 class="text-4xl font-black mt-2">128.492</h4>
                    </div>
                    <div class="glass p-8 rounded-2xl border-b-4 border-[var(--p-accent)]">
                        <p class="mono text-[10px] text-gray-500 uppercase">Active_Nodes</p>
                        <h4 class="text-4xl font-black mt-2">1.042</h4>
                    </div>
                    <div class="glass p-8 rounded-2xl border-b-4 border-green-500">
                        <p class="mono text-[10px] text-gray-500 uppercase">Downloads</p>
                        <h4 class="text-4xl font-black mt-2">89.201</h4>
                    </div>
                    <div class="glass p-8 rounded-2xl border-b-4 border-red-500">
                        <p class="mono text-[10px] text-gray-500 uppercase">Threats_Blocked</p>
                        <h4 class="text-4xl font-black mt-2">432</h4>
                    </div>
                </div>
                <div class="glass p-10 rounded-3xl h-96">
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>

            <div id="tab-assets" class="tab-content space-y-8">
                <div class="grid lg:grid-cols-2 gap-10">
                    <div class="glass p-10 rounded-3xl space-y-6">
                        <h3 class="text-2xl font-black uppercase italic">Injetar Novo Asset</h3>
                        <input type="hidden" id="asset-id">
                        <input type="text" id="asset-title" placeholder="TÍTULO DO PAYLOAD" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg outline-none focus:border-[var(--p-accent)]">
                        <div class="grid grid-cols-2 gap-4">
                            <select id="asset-cat" class="bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg text-white">
                                <option value="script">SCRIPT_LUAU</option>
                                <option value="executor">EXECUTOR_V7</option>
                            </select>
                            <input type="text" id="asset-img" placeholder="URL IMAGEM" class="bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg">
                        </div>
                        <input type="text" id="asset-link" placeholder="LINK DE DOWNLOAD (MEDIAFIRE/MEGA)" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg">
                        <textarea id="asset-desc" placeholder="DESCRIÇÃO TÉCNICA E CHANGELOG..." class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg h-32"></textarea>
                        <button onclick="saveAsset()" class="w-full py-5 bg-[var(--p-accent)] text-white font-black rounded-xl uppercase italic shadow-2xl">Publicar Asset na Rede</button>
                    </div>
                    <div class="glass p-10 rounded-3xl overflow-y-auto max-h-[700px]">
                        <h3 class="text-xl font-bold uppercase mb-6 mono">Database_Entries</h3>
                        <div id="admin-list" class="space-y-3"></div>
                    </div>
                </div>
            </div>

            <div id="tab-config" class="tab-content">
                <div class="max-w-2xl glass p-10 rounded-3xl space-y-8">
                    <h3 class="text-3xl font-black uppercase italic">Site_Customization</h3>
                    <div class="space-y-4">
                        <input type="text" id="cfg-name" placeholder="Nome da Marca" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg">
                        <input type="text" id="cfg-logo" placeholder="Logo (1 Char)" maxlength="1" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg text-center">
                        <input type="text" id="cfg-popup" placeholder="Link Grupo Sorteio" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg">
                        <select id="cfg-theme" onchange="applyTheme(this.value)" class="w-full bg-black/50 border border-white/10 p-4 mono text-xs rounded-lg text-white">
                            <option value="default">NEXUS_PURPLE</option>
                            <option value="theme-blood">DEEP_BLOOD</option>
                            <option value="theme-emerald">CYBER_EMERALD</option>
                            <option value="theme-cyber">NEON_CYBER</option>
                        </select>
                        <button onclick="saveConfig()" class="w-full py-5 bg-white text-black font-black uppercase rounded-lg">Salvar Configurações</button>
                    </div>
                </div>
            </div>

        </main>
    </div>
</div>

<div id="aiModal" class="fixed inset-0 z-[4000] hidden items-center justify-center p-6 bg-black/95">
    <div class="w-full max-w-6xl h-[85vh] glass rounded-[40px] flex overflow-hidden border-[var(--p-accent)]/20 shadow-2xl">
        <div class="w-1/3 border-r border-white/5 p-10 flex flex-col justify-between bg-black/40">
            <div>
                <h4 class="text-3xl font-black uppercase italic italic mb-2">Tsuo <span class="text-[var(--p-accent)]">AI</span></h4>
                <p class="mono text-[10px] text-gray-500 uppercase tracking-widest">Neural_Module_v18.4</p>
                <div class="mt-10 space-y-4">
                    <div class="p-4 glass rounded-xl mono text-[9px] text-[var(--p-accent)] uppercase">Status: Ativo</div>
                    <div class="p-4 glass rounded-xl mono text-[9px] text-gray-400 uppercase">Capacidade: Deep Luau Learning</div>
                </div>
            </div>
            <button onclick="closeModal('aiModal')" class="w-full py-4 border border-white/10 rounded-xl mono text-[10px] uppercase">Encerrar Interface</button>
        </div>
        <div class="flex-grow flex flex-col">
            <div id="aiHistory" class="flex-grow p-12 overflow-y-auto mono text-sm space-y-6">
                <div class="p-6 bg-white/5 border-l-4 border-[var(--p-accent)] rounded-r-xl">
                    > Conexão Neural Estabelecida. Sou a Tsuo IA V18. <br>
                    Posso gerar scripts de bypass, explicar funções de metatables e otimizar seu código Luau. O que deseja protocolar?
                </div>
            </div>
            <form onsubmit="handleAI(event)" class="p-10 bg-black/60 border-t border-white/5 flex gap-6">
                <input type="text" id="aiInput" class="flex-grow bg-transparent border-b-2 border-white/10 p-4 mono text-sm outline-none focus:border-[var(--p-accent)] transition-all" placeholder="Digite seu comando ou dúvida técnica...">
                <button class="w-16 h-16 bg-[var(--p-accent)] rounded-full flex items-center justify-center shadow-xl hover:scale-110 transition">
                    <i data-lucide="send" class="text-white"></i>
                </button>
            </form>
        </div>
    </div>
</div>

<button onclick="openModal('aiModal')" class="fixed bottom-12 right-12 w-24 h-24 bg-[var(--p-accent)] rounded-full flex items-center justify-center shadow-[0_0_60px_var(--p-glow)] hover:scale-110 transition-all z-[1000] group">
    <i data-lucide="brain-circuit" class="w-10 h-10 text-white"></i>
</button>

<div id="loginModal" class="fixed inset-0 z-[5000] hidden items-center justify-center bg-black/98 backdrop-blur-3xl">
    <div class="w-full max-w-sm p-12 glass rounded-[30px] text-center border-[var(--p-accent)]/30">
        <h3 class="text-3xl font-black uppercase mb-10 italic">Terminal_Auth</h3>
        <input type="password" id="admin-pass" placeholder="MASTER_KEY" class="w-full bg-black border border-white/10 p-5 mb-8 mono text-xs text-center rounded-xl outline-none focus:border-[var(--p-accent)]">
        <button onclick="authAdmin()" class="w-full bg-[var(--p-accent)] py-5 font-black uppercase italic rounded-xl shadow-2xl">Acessar Core</button>
    </div>
</div>

<script>
    // --- ENGINE DE SOM (HOWLER) ---
    const sounds = {
        hover: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'], volume: 0.1 }),
        click: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'], volume: 0.3 }),
        granted: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3'], volume: 0.5 })
    };
    function playSound(type) { sounds[type].play(); }

    // --- DATABASE & CONFIG ---
    let db = JSON.parse(localStorage.getItem('tsuo_titan_db')) || [];
    let config = JSON.parse(localStorage.getItem('tsuo_titan_cfg')) || {
        name: 'TSUO INDUSTRIES', logo: 'T', popup: 'https://discord.gg', theme: 'default'
    };

    // --- THREE.JS BACKGROUND (PARTÍCULAS) ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas-3d'), alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const particlesGeometry = new THREE.BufferGeometry();
    const count = 3000;
    const positions = new Float32Array(count * 3);
    for(let i=0; i<count*3; i++) positions[i] = (Math.random() - 0.5) * 10;
    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    const particlesMaterial = new THREE.PointsMaterial({ size: 0.005, color: 0xbc13fe, transparent: true, opacity: 0.5 });
    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particlesMesh);
    camera.position.z = 3;

    function animate3D() {
        requestAnimationFrame(animate3D);
        particlesMesh.rotation.y += 0.001;
        particlesMesh.rotation.x += 0.0005;
        renderer.render(scene, camera);
    }
    animate3D();

    // --- TSUO IA NEURAL ---
    const knowledge = {
        "metatable": "Metatables são tabelas que permitem mudar o comportamento de outras tabelas. Use 'setmetatable(obj, mt)' para hooks poderosos.",
        "hook": "Hooking é interceptar funções. Em Luau, usamos 'hookfunction' ou 'hookmetamethod' para enganar o Anti-Cheat.",
        "bypass": "Para bypassar detecções de velocidade, manipule a propriedade 'WalkSpeed' através da metatable do Humanoide no __index.",
        "ajuda": "Posso ajudar com: Otimização de código, Hooks de Metatable, Bypass de Anti-Cheat e Templates de UI.",
        "oi": "Operador detectado. Sistema nominal. Aguardando input técnico.",
        "roblox": "Ambiente de execução detectado. Recomendo o uso de task.wait() para evitar crashes em loops de alta frequência."
    };

    function handleAI(e) {
        e.preventDefault();
        const input = document.getElementById('aiInput');
        const hist = document.getElementById('aiHistory');
        const query = input.value.toLowerCase();
        if(!query) return;

        playSound('click');
        hist.innerHTML += `<div class="text-right text-white/30 uppercase italic text-[10px] mb-2">> ${query}</div>`;
        
        setTimeout(() => {
            let res = "Erro 404: Conhecimento não indexado. Tente termos como 'Metatable', 'Hook' ou 'Bypass'.";
            for(let k in knowledge) if(query.includes(k)) res = knowledge[k];
            
            hist.innerHTML += `<div class="p-6 bg-white/5 border-l-4 border-[var(--p-accent)] rounded-r-xl text-blue-100 animate-pulse">TSUO_IA: ${res}</div>`;
            hist.scrollTop = hist.scrollHeight;
        }, 600);
        input.value = '';
    }

    // --- ADMIN DASHBOARD ---
    function renderFeed(filter = 'todos') {
        const feed = document.getElementById('postFeed');
        const adminList = document.getElementById('admin-list');
        feed.innerHTML = ''; adminList.innerHTML = '';

        const filtered = filter === 'todos' ? db : db.filter(x => x.cat === filter);
        filtered.forEach(p => {
            feed.innerHTML += `
                <div class="glass p-8 rounded-[30px] asset-card relative group overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-[var(--p-accent)]/10 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500"></div>
                    <img src="${p.img || 'https://images.unsplash.com/photo-1614850523296-d8c1af93d400'}" class="w-full h-48 object-cover rounded-2xl mb-6 opacity-60 group-hover:opacity-100 transition duration-700 group-hover:scale-105">
                    <span class="px-3 py-1 mono text-[8px] bg-[var(--p-accent)]/20 text-[var(--p-accent)] rounded-full uppercase font-bold">${p.cat}</span>
                    <h4 class="text-2xl font-black italic uppercase mt-4 group-hover:text-[var(--p-accent)] transition">${p.title}</h4>
                    <p class="text-[10px] text-gray-500 mono mt-3 line-clamp-2 h-8">${p.desc}</p>
                    <a href="${p.link}" target="_blank" onmouseenter="playSound('hover')" class="block mt-8 py-4 bg-white/5 border border-white/5 text-center mono text-[10px] font-black uppercase hover:bg-white hover:text-black transition-all">Download_Archive_V7 >></a>
                </div>
            `;
        });

        db.forEach(p => {
            adminList.innerHTML += `
                <div class="flex justify-between items-center p-4 glass rounded-xl border-l-4 border-[var(--p-accent)]">
                    <span class="mono text-[11px] font-bold uppercase text-gray-400">${p.title}</span>
                    <div class="flex gap-4">
                        <button onclick="editAsset(${p.id})" class="text-blue-500 mono text-[10px] hover:underline">EDIT</button>
                        <button onclick="deleteAsset(${p.id})" class="text-red-500 mono text-[10px] hover:underline">DEL</button>
                    </div>
                </div>
            `;
        });
        lucide.createIcons();
    }

    function saveAsset() {
        const id = document.getElementById('asset-id').value;
        const asset = {
            id: id ? parseInt(id) : Date.now(),
            title: document.getElementById('asset-title').value,
            cat: document.getElementById('asset-cat').value,
            img: document.getElementById('asset-img').value,
            link: document.getElementById('asset-link').value,
            desc: document.getElementById('asset-desc').value
        };
        if(id) db[db.findIndex(x => x.id == id)] = asset;
        else db.unshift(asset);
        
        localStorage.setItem('tsuo_titan_db', JSON.stringify(db));
        resetForm(); renderFeed();
        playSound('granted');
    }

    function editAsset(id) {
        const p = db.find(x => x.id == id);
        document.getElementById('asset-id').value = p.id;
        document.getElementById('asset-title').value = p.title;
        document.getElementById('asset-cat').value = p.cat;
        document.getElementById('asset-img').value = p.img;
        document.getElementById('asset-link').value = p.link;
        document.getElementById('asset-desc').value = p.desc;
        switchTab('tab-assets');
    }

    function deleteAsset(id) {
        if(confirm("Expurgar asset da database permanentemente?")) {
            db = db.filter(x => x.id != id);
            localStorage.setItem('tsuo_titan_db', JSON.stringify(db));
            renderFeed();
        }
    }

    function resetForm() {
        document.getElementById('asset-id').value = '';
        document.getElementById('asset-title').value = '';
        document.getElementById('asset-img').value = '';
        document.getElementById('asset-link').value = '';
        document.getElementById('asset-desc').value = '';
    }

    // --- CONFIG & TEMA ---
    function saveConfig() {
        config.name = document.getElementById('cfg-name').value;
        config.logo = document.getElementById('cfg-logo').value;
        config.popup = document.getElementById('cfg-popup').value;
        config.theme = document.getElementById('cfg-theme').value;
        localStorage.setItem('tsuo_titan_cfg', JSON.stringify(config));
        location.reload();
    }

    function applyTheme(t) {
        document.body.className = t + " scanline";
        const colors = { default: 0xbc13fe, 'theme-blood': 0xff003c, 'theme-emerald': 0x00ff88, 'theme-cyber': 0x00e5ff };
        particlesMaterial.color.setHex(colors[t] || 0xbc13fe);
    }

    // --- ANALYTICS CHART (CHART.JS) ---
    function initChart() {
        const ctx = document.getElementById('trafficChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['00h', '04h', '08h', '12h', '16h', '20h', '24h'],
                datasets: [{
                    label: 'Global Traffic (TB)',
                    data: [12, 19, 3, 5, 2, 30, 45],
                    borderColor: '#bc13fe',
                    borderWidth: 3,
                    fill: true,
                    backgroundColor: 'rgba(188, 19, 254, 0.1)'
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, grid: { color: '#1a1a1a' } }, x: { grid: { display: false } } } }
        });
    }

    // --- UTILIDADES ---
    function switchTab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        playSound('click');
        if(id === 'tab-dash') initChart();
    }

    function openModal(id) { document.getElementById(id).style.display = 'flex'; playSound('hover'); }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    function closePopup() { gsap.to("#entry-popup", { opacity: 0, duration: 0.5, onComplete: () => closeModal('entry-popup') }); }

    function authAdmin() {
        if(document.getElementById('admin-pass').value === '171088') {
            closeModal('loginModal');
            openModal('adminPanel');
            document.getElementById('cfg-name').value = config.name;
            document.getElementById('cfg-logo').value = config.logo;
            document.getElementById('cfg-popup').value = config.popup;
            playSound('granted');
        } else alert("ACESSO NEGADO: CHAVE INVÁLIDA.");
    }

    // --- BOOTSTRAP ---
    window.onload = async () => {
        // Init Data
        document.getElementById('site-name').innerHTML = config.name.replace(" ", ` <span class="text-[var(--p-accent)]">`) + "</span>";
        document.getElementById('site-logo').innerText = config.logo;
        document.getElementById('popup-link').href = config.popup;
        applyTheme(config.theme);
        renderFeed();
        
        // Logs
        const logBox = document.getElementById('system-logs');
        const logs = ["Injetando DLL...", "Bypass detected.", "Sincronizando Nodes...", "Vault Decrypted.", "Limpando Logs...", "Neural Link OK."];
        setInterval(() => {
            const p = document.createElement('div');
            p.innerText = `[${new Date().toLocaleTimeString()}] > ${logs[Math.floor(Math.random()*logs.length)]}`;
            logBox.prepend(p);
            if(logBox.children.length > 8) logBox.lastChild.remove();
        }, 1200);

        // Clock & Geo
        setInterval(() => document.getElementById('real-time').innerText = new Date().toLocaleTimeString(), 1000);
        try {
            const res = await fetch('https://ipapi.co/json/');
            const data = await res.json();
            document.getElementById('user-ip').innerText = `IP: ${data.ip}`;
            document.getElementById('user-loc').innerText = `${data.city}, ${data.country_name}`;
        } catch(e) {}

        // Entry Popup
        setTimeout(() => {
            openModal('entry-popup');
            gsap.from("#popup-card", { scale: 0.5, opacity: 0, duration: 1, ease: "back.out(1.7)" });
        }, 1500);

        lucide.createIcons();
    };

    window.onresize = () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    };
</script>

</body>
</html>
